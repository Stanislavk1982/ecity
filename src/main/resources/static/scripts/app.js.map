{"version":3,"sources":["../../source/scripts/app.js"],"names":["define","React","ReactDom","ReactRouter","Q","Login","Ecity","Rules","Library","BeforeStart","Game","Register","Router","Route","hashHistory","props","game","getComponent","page","route","defer","resolve","render","createElement","promise","requireLogIn","nextState","replace","callback","isLoggedIn","Page","createClass","displayName","createFactory","document","getElementById"],"mappings":";;AAAAA,OAAO,CAAC,OAAD,EAAU,WAAV,EAAuB,cAAvB,EAAuC,GAAvC,EAA4C,eAA5C,EAA6D,gBAA7D,EAA+E,eAA/E,EAAgG,iBAAhG,EAAmH,sBAAnH,EAA2I,mBAA3I,EAAgK,kBAAhK,CAAP,EAA4L,UAAUC,KAAV,EAAiBC,QAAjB,EAA2BC,WAA3B,EAAwCC,CAAxC,EAA2CC,KAA3C,EAAkDC,KAAlD,EAAyDC,KAAzD,EAAgEC,OAAhE,EAAyEC,WAAzE,EAAsFC,IAAtF,EAA4FC,QAA5F,EAAsG;;AAE9R,QAAIC,SAAST,YAAYS,MAAzB;AACA,QAAIC,QAAQV,YAAYU,KAAxB;AACA,QAAIC,cAAcX,YAAYW,WAA9B;;AAEA,QAAIC,QAAQ;AACRC,cAAM,IAAIN,IAAJ;AADE,KAAZ;;AAIA,QAAIO,eAAe,SAAfA,YAAe,CAASC,IAAT,EAAc;AAC7B,eAAO,UAASC,KAAT,EAAe;AAClB,gBAAIC,QAAQhB,EAAEgB,KAAF,EAAZ;;AAEAA,kBAAMC,OAAN,CAAc,YAAU;AACpB,uBAAO;AACHC,4BAAQ,kBAAU;AACd,+BAAOrB,MAAMsB,aAAN,CAAoBL,IAApB,EAA0BH,KAA1B,CAAP;AACH;AAHE,iBAAP;AAKH,aAND;;AAQA,mBAAOK,MAAMI,OAAb;AACH,SAZD;AAaH,KAdD;;AAgBA,QAAIC,eAAe,SAAfA,YAAe,CAASC,SAAT,EAAoBC,OAApB,EAA6BC,QAA7B,EAAsC;AACvD;AACE,YAAG,CAACb,MAAMC,IAAN,CAAWa,UAAX,EAAJ,EAA4B;AACxBF,oBAAQ,QAAR;AACH;AACDC;AACH,KAND;;AAQA,QAAIE,OAAO7B,MAAM8B,WAAN,CAAkB;;AAEzBC,qBAAa,MAFY;;AAIzBV,gBAAQ,kBAAY;AAChB,mBACI;AAAC,sBAAD;AAAA,kBAAQ,SAASR,WAAjB;AACI,oCAAC,KAAD,IAAO,MAAK,GAAZ,EAAgB,cAAcG,aAAaZ,KAAb,CAA9B,GADJ;AAEI,oCAAC,KAAD,IAAO,MAAK,QAAZ,EAAqB,cAAcY,aAAaZ,KAAb,CAAnC,GAFJ;AAGI,oCAAC,KAAD,IAAO,MAAK,SAAZ,EAAsB,cAAcY,aAAaX,KAAb,CAApC,EAAyD,SAASmB,YAAlE,GAHJ;AAII,oCAAC,KAAD,IAAO,MAAK,eAAZ,EAA4B,cAAcR,aAAaX,KAAb,CAA1C,EAA+D,SAASmB,YAAxE,GAJJ;AAKI,oCAAC,KAAD,IAAO,MAAK,QAAZ,EAAqB,cAAcR,aAAaV,KAAb,CAAnC,EAAwD,SAASkB,YAAjE,GALJ;AAMI,oCAAC,KAAD,IAAO,MAAK,UAAZ,EAAuB,cAAcR,aAAaT,OAAb,CAArC,EAA4D,SAASiB,YAArE,GANJ;AAOI,oCAAC,KAAD,IAAO,MAAK,eAAZ,EAA4B,cAAcR,aAAaR,WAAb,CAA1C,EAAqE,SAASgB,YAA9E,GAPJ;AAQI,oCAAC,KAAD,IAAO,MAAK,WAAZ,EAAwB,cAAcR,aAAaN,QAAb,CAAtC;AARJ,aADJ;AAYH;AAjBwB,KAAlB,CAAX;;AAoBAmB,WAAO7B,MAAMgC,aAAN,CAAoBH,IAApB,CAAP;;AAEA5B,aAASoB,MAAT,CAAgB,IAAIQ,IAAJ,EAAhB,EAA4BI,SAASC,cAAT,CAAwB,MAAxB,CAA5B;AACH,CAzDD","file":"app.js","sourcesContent":["define(['react', 'react-dom', 'react-router', 'q', './pages/login', './pages/e-city', './pages/rules', './pages/library', './pages/before-start', './controller/game', './pages/register'], function (React, ReactDom, ReactRouter, Q, Login, Ecity, Rules, Library, BeforeStart, Game, Register) {\n\n    var Router = ReactRouter.Router;\n    var Route = ReactRouter.Route;\n    var hashHistory = ReactRouter.hashHistory;\n    \n    var props = {\n        game: new Game()\n    };\n    \n    var getComponent = function(page){\n        return function(route){\n            var defer = Q.defer();\n            \n            defer.resolve(function(){\n                return {\n                    render: function(){\n                        return React.createElement(page, props);\n                    }\n                };\n            });\n            \n            return defer.promise;  \n        };\n    };\n        \n    var requireLogIn = function(nextState, replace, callback){\n      //  console.log(nextState, replace);\n        if(!props.game.isLoggedIn()){\n            replace('/login');\n        }\n        callback();\n    };\n    \n    var Page = React.createClass({\n\n        displayName: 'Page',\n\n        render: function () {\n            return (\n                <Router history={hashHistory}>\n                    <Route path=\"/\" getComponent={getComponent(Login)}/>\n                    <Route path=\"/login\" getComponent={getComponent(Login)}/>\n                    <Route path=\"/e-city\" getComponent={getComponent(Ecity)} onEnter={requireLogIn}/>\n                    <Route path=\"/e-city/:name\" getComponent={getComponent(Ecity)} onEnter={requireLogIn}/>\n                    <Route path=\"/rules\" getComponent={getComponent(Rules)} onEnter={requireLogIn}/>\n                    <Route path=\"/library\" getComponent={getComponent(Library)} onEnter={requireLogIn}/>\n                    <Route path=\"/before-start\" getComponent={getComponent(BeforeStart)} onEnter={requireLogIn}/>\n                    <Route path=\"/register\" getComponent={getComponent(Register)}/>\n                </Router>\n            );\n        }\n    });\n\n    Page = React.createFactory(Page);\n\n    ReactDom.render(new Page(), document.getElementById('page'));\n});\n"]}